<!-- this is bootstrap4. may not work with other versions
https://simpleisbetterthancomplex.com/tutorial/2016/08/03/how-to-paginate-with-django.html-->
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
<!--the table class below uses bootstrap to format the table. The first set of <th> tags are columns names. The following
<td> tags use django variables that display the data in the specified column names. The first set of <td> tags
 add the thread creators post to the table, all of the other replies are looped through and added to the table.-->
<a href="{% url 'polls:index'%}">Back to Threads List</a>
<br>
<a href="{% url 'polls:users'%}">Users</a>
<br>
<br>
<a href="{% url 'polls:pie_chart' thread_info.thread_id %}">Charts for Thread</a>
<br>
<h3>{{ thread_info.title }}</h3>
<br>
<a href="{% url 'polls:detail' thread_info.thread_id %}">Unfilter</a>
<!--filter by user name form-->
<form method="POST">{% csrf_token %}
  <label for="fname">Filter by Username:</label><br>
  <input type="text" id="fname" name="fname"><br>
  <input type="submit" value="Submit">
</form>
<br>
<div>
<table class="table table-bordered">
  <thead>
    <tr>
        <th>Username</th>
        <th>Quoted</th>
        <th>Reply</th>
        <th>Sentiment</th>
        <th>Score</th>
        <th>Date</th>
        <th>Page</th>
    </tr>
  </thead>
  <tbody>
  <!--Use this if statement to only show the thread creators reply in the table on the first page -->
    {% if posts.number == 1 %}
       <tr>
          <td>{{ thread_info.username }} (OP)</td>
          <td></td>
          <td>{{ thread_info.replies }}</td>
          <td></td>
          <td></td>
          <td>{{ thread_info.date_time|date:'Y-m-d H:i' }}</td>
          <td></td>
      </tr>
    {% endif %}
    {% for post in posts %}
      <tr>
          <td>{{ post.username }}</td>
          <td>{{ post.quoted }}</td>
          <td>{{ post.replies }}</td>
          <td>{{ post.sentiment }}</td>
          <td>{{ post.score }}</td>
          <td>{{ post.date_time|date:'Y-m-d H:i' }}</td>
          <td>{{ post.thread_page }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
</div>
<!-- below is pagination code. I use the Paginator class and get_elided_page_range in views.py to format the pagination
This code uses bootstrap and prevents all pages from showing if there are several pages.-->
<div>
  <ul class="pagination justify-content-center flex-wrap mt-2 mb-4">
    {% if posts.has_previous %}
      <li class="page-item"><a class="page-link" href="?page={{ posts.previous_page_number }}">&laquo;</a></li>
    {% else %}
      <li class="disabled page-item"><span class="page-link">&laquo;</span></li>
    {% endif %}
    {% for post in pagination_page_range %}
      {% if posts.number == post %}
        <li class="active page-item"><span class="page-link">{{ post }}<span class="sr-only">(current)</span></span></li>
      {% else %}
        <li class="page-item"><a class="page-link" href="?page={{ post }}">{{ post }}</a></li>
      {% endif %}
    {% endfor %}
    {% if posts.has_next %}
      <li class="page-item"><a class="page-link" href="?page={{ posts.next_page_number }}">&raquo;</a></li>
    {% else %}
      <li class="disabled page-item"><span class="page-link">&raquo;</span></li>
    {% endif %}
  </ul>
</div>

